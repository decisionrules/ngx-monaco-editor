{"version":3,"file":"materia-ui-ngx-monaco-editor.mjs","sources":["../../../src/ngx-monaco-editor/src/lib/interfaces/index.ts","../../../src/ngx-monaco-editor/src/lib/services/monaco-editor-loader.service.ts","../../../src/ngx-monaco-editor/src/lib/directives/monaco-editor-loader.directive.ts","../../../src/ngx-monaco-editor/src/lib/components/monaco-editor/monaco-editor.component.ts","../../../src/ngx-monaco-editor/src/lib/components/monaco-diff-editor/monaco-diff-editor.component.ts","../../../src/ngx-monaco-editor/src/lib/monaco-editor.module.ts","../../../src/ngx-monaco-editor/src/public_api.ts","../../../src/ngx-monaco-editor/src/materia-ui-ngx-monaco-editor.ts"],"sourcesContent":["/// <reference path=\"monaco.ts\" />\nexport const MONACO_PATH = 'MONACO_PATH';\nexport type MonacoEditorConstructionOptions = monaco.editor.IStandaloneEditorConstructionOptions;\nexport type MonacoDiffEditorConstructionOptions = monaco.editor.IStandaloneDiffEditorConstructionOptions;\nexport type MonacoEditorUri = monaco.Uri;\nexport type MonacoStandaloneCodeEditor = monaco.editor.IStandaloneCodeEditor;\nexport type MonacoStandaloneDiffEditor = monaco.editor.IStandaloneDiffEditor;\n","import { Injectable, NgZone, Optional, Inject } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { MONACO_PATH } from '../interfaces';\n\n@Injectable({ providedIn: 'root' })\nexport class MonacoEditorLoaderService {\n    nodeRequire: any;\n    isMonacoLoaded$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n    private _monacoPath = 'assets/monaco-editor/min/vs';\n\n    set monacoPath(value: string) {\n        if (value) {\n            this._monacoPath = value;\n        }\n    }\n\n    constructor(private ngZone: NgZone, @Optional() @Inject(MONACO_PATH) public monacoPathConfig: string) {\n      if ((<any>window).monacoEditorAlreadyInitialized) {\n        ngZone.run(() => this.isMonacoLoaded$.next(true));\n        return;\n      }\n\n      (<any>window).monacoEditorAlreadyInitialized = true;\n\n      if (this.monacoPathConfig) {\n        this.monacoPath = this.monacoPathConfig;\n      }\n\n      this.loadMonaco();\n    }\n\n    loadMonaco() {\n      const onGotAmdLoader = () => {\n\n        let vsPath = this._monacoPath;\n        (<any>window).amdRequire = (<any>window).require;\n\n        const isElectron = !!this.nodeRequire;\n        const isPathUrl = vsPath.includes('http');\n\n        if (isElectron) {\n          // Restore node require in window\n          (<any>window).require = this.nodeRequire;\n\n          if (!isPathUrl) {\n            const path = (<any>window).require('path');\n            vsPath = path.resolve((<any>window).__dirname, this._monacoPath);\n          }\n        }\n\n        (<any>window).amdRequire.config({ paths: { vs: vsPath } });\n\n        // Load monaco\n        (<any>window).amdRequire(['vs/editor/editor.main'], () => {\n            this.ngZone.run(() => this.isMonacoLoaded$.next(true));\n        }, (error) => console.error('Error loading monaco-editor: ', error));\n      };\n\n      // Check if AMD loader already available\n      const isAmdLoaderAvailable = !!(<any>window).amdRequire;\n      if (isAmdLoaderAvailable) {\n        return onGotAmdLoader();\n      }\n\n      const isElectron = !!(<any>window).require;\n\n      if (isElectron) {\n        this.addElectronFixScripts();\n        this.nodeRequire = (<any>window).require;\n      }\n\n      const loaderScript: HTMLScriptElement = document.createElement('script');\n      loaderScript.type = 'text/javascript';\n      loaderScript.src = `${this._monacoPath}/loader.js`;\n      loaderScript.addEventListener('load', onGotAmdLoader);\n      document.body.appendChild(loaderScript);\n    }\n\n    addElectronFixScripts() {\n        const electronFixScript = document.createElement('script');\n        // workaround monaco-css not understanding the environment\n        const inlineScript = document.createTextNode('self.module = undefined;');\n        // workaround monaco-typescript not understanding the environment\n        const inlineScript2 = document.createTextNode('self.process.browser = true;');\n        electronFixScript.appendChild(inlineScript);\n        electronFixScript.appendChild(inlineScript2);\n        document.body.appendChild(electronFixScript);\n    }\n}\n","import { Directive, TemplateRef, ViewContainerRef, OnDestroy, OnInit } from '@angular/core';\nimport { MonacoEditorLoaderService } from '../services/monaco-editor-loader.service';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\n\n@Directive({ selector: '[ngxLoadMonacoEditor]' })\nexport class MonacoEditorLoaderDirective implements OnInit, OnDestroy {\n  isMonacoLoaded$ = this.monacoEditorLoaderService.isMonacoLoaded$.asObservable();\n  destroyed$ = new Subject<void>();\n\n  constructor(\n    private templateRef: TemplateRef<any>,\n    private viewContainer: ViewContainerRef,\n    private monacoEditorLoaderService: MonacoEditorLoaderService\n  ) {}\n\n  ngOnInit() {\n    this.isMonacoLoaded$.pipe(takeUntil(this.destroyed$)).subscribe((loaded) => {\n      if (!loaded) {\n        return this.viewContainer.clear();\n      }\n      this.viewContainer.createEmbeddedView(this.templateRef);\n    });\n  }\n\n  ngOnDestroy() {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  Input,\n  NgZone,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges,\n  ViewChild\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALIDATORS, NG_VALUE_ACCESSOR, ValidationErrors, Validator } from '@angular/forms';\nimport { filter, take } from 'rxjs/operators';\n\nimport { MonacoEditorLoaderService } from '../../services/monaco-editor-loader.service';\nimport { MonacoEditorConstructionOptions, MonacoEditorUri, MonacoStandaloneCodeEditor } from '../../interfaces';\n\n@Component({\n  selector: 'ngx-monaco-editor',\n  template: `\n    <div #container class=\"editor-container\" fxFlex>\n      <div\n        #editor\n        class=\"monaco-editor\"\n      ></div>\n    </div>`,\n  styles: [\n    `\n      .monaco-editor {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n\n      }\n\n      .editor-container {\n        overflow: hidden;\n        position: relative;\n        display: table;\n        width: 100%;\n        height: 100%;\n        min-width: 0;\n      }`\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => MonacoEditorComponent),\n      multi: true\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => MonacoEditorComponent),\n      multi: true,\n    }\n  ]\n})\nexport class MonacoEditorComponent implements OnInit, OnChanges, OnDestroy, ControlValueAccessor, Validator {\n  @Input() options: MonacoEditorConstructionOptions;\n  @Input() uri?: MonacoEditorUri;\n  @Input() insideNgZone = false;\n  @Output() init: EventEmitter<MonacoStandaloneCodeEditor> = new EventEmitter();\n  @ViewChild('editor', {static: true}) editorContent: ElementRef;\n\n  editor: MonacoStandaloneCodeEditor;\n  modelUriInstance: monaco.editor.ITextModel;\n  value: string;\n  parsedError: string;\n\n  private onTouched: () => void = () => {\n  };\n  private onErrorStatusChange: () => void = () => {\n  };\n  private propagateChange: (_: any) => any = () => {\n  };\n\n  get model() {\n    return this.editor && this.editor.getModel();\n  }\n\n  get modelMarkers() {\n    return this.model && monaco.editor.getModelMarkers({\n      resource: this.model.uri\n    });\n  }\n\n  constructor(private monacoLoader: MonacoEditorLoaderService,\n              private zone: NgZone) {\n  }\n\n  ngOnInit() {\n    this.monacoLoader.isMonacoLoaded$.pipe(\n      filter(isLoaded => isLoaded),\n      take(1)\n    ).subscribe(() => {\n      this.initEditor();\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (this.editor && changes.options && !changes.options.firstChange) {\n      const {language: toLanguage, theme: toTheme, ...options} = changes.options.currentValue;\n      const {language: fromLanguage, theme: fromTheme} = changes.options.previousValue;\n\n      if (fromLanguage !== toLanguage) {\n        monaco.editor.setModelLanguage(\n          this.editor.getModel(),\n          this.options && this.options.language ? this.options.language : 'text'\n        );\n      }\n\n      if (fromTheme !== toTheme) {\n        monaco.editor.setTheme(toTheme);\n      }\n\n      this.editor.updateOptions(options);\n    }\n\n    if (this.editor && changes.uri) {\n      const toUri = changes.uri.currentValue;\n      const fromUri = changes.uri.previousValue;\n\n      if (fromUri && !toUri || !fromUri && toUri || toUri && fromUri && toUri.path !== fromUri.path) {\n        const value = this.editor.getValue();\n\n        if (this.modelUriInstance) {\n          this.modelUriInstance.dispose();\n        }\n\n        let existingModel;\n\n        if (toUri) {\n          existingModel = monaco.editor.getModels().find((model) => model.uri.path === toUri.path);\n        }\n\n        this.modelUriInstance = existingModel ? existingModel : monaco.editor.createModel(value, this.options.language || 'text', this.uri);\n        this.editor.setModel(this.modelUriInstance);\n      }\n    }\n  }\n\n  writeValue(value: string): void {\n    this.value = value;\n    if (this.editor && value) {\n      this.editor.setValue(value);\n    } else if (this.editor) {\n      this.editor.setValue('');\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  validate(): ValidationErrors {\n    return !this.parsedError ? null : {\n      monaco: {\n        value: this.parsedError.split('|'),\n      }\n    };\n  }\n\n  registerOnValidatorChange?(fn: () => void): void {\n    this.onErrorStatusChange = fn;\n  }\n\n  private initEditor() {\n    const options: MonacoEditorConstructionOptions = {\n      value: [this.value].join('\\n'),\n      language: 'text',\n      automaticLayout: true,\n      scrollBeyondLastLine: false,\n      theme: 'vc'\n    };\n\n    if (this.insideNgZone) {\n      this.editor = monaco.editor.create(\n        this.editorContent.nativeElement,\n        this.options ? {...options, ...this.options} : options\n      );\n    } else {\n      this.zone.runOutsideAngular(() => {\n        this.editor = monaco.editor.create(\n          this.editorContent.nativeElement,\n          this.options ? {...options, ...this.options} : options\n        );\n      })\n    }\n\n    this.registerEditorListeners();\n    this.init.emit(this.editor);\n  }\n\n  registerEditorListeners() {\n    this.editor.onDidChangeModelContent(() => {\n      this.propagateChange(this.editor.getValue());\n    });\n\n    this.editor.onDidChangeModelDecorations(() => {\n      const currentParsedError = this.modelMarkers.map(({message}) => message).join('|');\n      const hasValidationStatusChanged = this.parsedError !== currentParsedError;\n\n      if (hasValidationStatusChanged) {\n        this.parsedError = currentParsedError;\n        this.onErrorStatusChange();\n      }\n    });\n\n    this.editor.onDidBlurEditorText(() => {\n      this.onTouched();\n    });\n  }\n\n  ngOnDestroy() {\n    if (this.editor) {\n      this.editor.dispose();\n    }\n  }\n}\n","import {\n    Component,\n    ViewChild,\n    ElementRef,\n    EventEmitter,\n    OnInit,\n    OnChanges,\n    OnDestroy,\n    Output,\n    Input,\n    ChangeDetectionStrategy,\n    SimpleChanges\n} from '@angular/core';\nimport { filter, take } from 'rxjs/operators';\n\nimport { MonacoEditorLoaderService } from '../../services/monaco-editor-loader.service';\nimport { MonacoDiffEditorConstructionOptions, MonacoStandaloneDiffEditor } from '../../interfaces';\n\n@Component({\n    selector: 'ngx-monaco-diff-editor',\n    template: `<div #container class=\"editor-container\" fxFlex>\n\t\t<div\n\t\t\t#diffEditor\n\t\t\tclass=\"monaco-editor\"\n\t\t></div>\n</div>`,\n    styles: [\n        `\n.monaco-editor {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n\n}\n.editor-container {\n\toverflow: hidden;\n\tposition: relative;\n\tdisplay: table;\n\twidth: 100%;\n  height: 100%;\n  min-width: 0;\n}`\n    ],\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class MonacoDiffEditorComponent implements OnInit, OnChanges, OnDestroy {\n    container: HTMLDivElement;\n    editor: MonacoStandaloneDiffEditor;\n\n    @Input() original: string;\n    @Input() modified: string;\n    @Input() options: MonacoDiffEditorConstructionOptions;\n    @Output() init: EventEmitter< MonacoStandaloneDiffEditor> = new EventEmitter();\n\n    @ViewChild('diffEditor', {static: true}) editorContent: ElementRef;\n\n    constructor(private monacoLoader: MonacoEditorLoaderService) { }\n\n    ngOnInit() {\n        this.container = this.editorContent.nativeElement;\n        this.monacoLoader.isMonacoLoaded$.pipe(\n            filter(isLoaded => isLoaded),\n            take(1),\n        ).subscribe(() => {\n            this.initMonaco();\n        });\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (this.editor && ((changes.code && !changes.code.firstChange) || (changes.modified && !changes.modified.firstChange))) {\n            const modified = monaco.editor.createModel(this.modified);\n            const original = monaco.editor.createModel(this.original);\n            this.editor.setModel({\n                original,\n                modified\n            });\n        }\n        if (\n            this.editor &&\n            changes.options &&\n            !changes.options.firstChange\n        ) {\n            if (changes.options.previousValue.theme !== changes.options.currentValue.theme) {\n                monaco.editor.setTheme(changes.options.currentValue.theme);\n            }\n\n            this.editor.updateOptions(changes.options.currentValue);\n        }\n    }\n\n    private initMonaco() {\n        let opts: MonacoDiffEditorConstructionOptions = {\n            readOnly: true,\n            automaticLayout: true,\n            theme: 'vc'\n        };\n        if (this.options) {\n            opts = Object.assign({}, opts, this.options);\n        }\n        this.editor = monaco.editor.createDiffEditor(this.container, opts);\n\n        const original = monaco.editor.createModel(this.original);\n        const modified = monaco.editor.createModel(this.modified);\n\n        this.editor.setModel({\n            original,\n            modified\n        });\n        this.editor.layout();\n        this.init.emit(this.editor);\n    }\n\n    ngOnDestroy() {\n        if (this.editor) {\n            this.editor.dispose();\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { MonacoEditorLoaderDirective } from './directives/monaco-editor-loader.directive';\nimport { MonacoEditorComponent } from './components/monaco-editor/monaco-editor.component';\nimport { MonacoDiffEditorComponent } from './components/monaco-diff-editor/monaco-diff-editor.component';\n\n@NgModule({\n    imports: [],\n    declarations: [\n        MonacoEditorLoaderDirective,\n        MonacoEditorComponent,\n        MonacoDiffEditorComponent\n    ],\n    exports: [\n        MonacoEditorLoaderDirective,\n        MonacoEditorComponent,\n        MonacoDiffEditorComponent\n    ]\n})\nexport class MonacoEditorModule { }\n","/*\n * Public API Surface of materia-monaco-editor-lib\n */\nexport * from './lib/directives/monaco-editor-loader.directive';\nexport * from './lib/services/monaco-editor-loader.service';\nexport * from './lib/interfaces';\nexport * from './lib/components/monaco-editor/monaco-editor.component';\nexport * from './lib/components/monaco-diff-editor/monaco-diff-editor.component';\nexport * from './lib/monaco-editor.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":";;;;;;;AAAA;MACa,WAAW,GAAG;;MCId,yBAAyB;IAWlC,YAAoB,MAAc,EAA0C,gBAAwB;QAAhF,WAAM,GAAN,MAAM,CAAQ;QAA0C,qBAAgB,GAAhB,gBAAgB,CAAQ;QATpG,oBAAe,GAA6B,IAAI,eAAe,CAAU,KAAK,CAAC,CAAC;QACxE,gBAAW,GAAG,6BAA6B,CAAC;QASlD,IAAU,MAAO,CAAC,8BAA8B,EAAE;YAChD,MAAM,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAClD,OAAO;SACR;QAEK,MAAO,CAAC,8BAA8B,GAAG,IAAI,CAAC;QAEpD,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACzB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC;SACzC;QAED,IAAI,CAAC,UAAU,EAAE,CAAC;KACnB;IAnBD,IAAI,UAAU,CAAC,KAAa;QACxB,IAAI,KAAK,EAAE;YACP,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;SAC5B;KACJ;IAiBD,UAAU;QACR,MAAM,cAAc,GAAG;YAErB,IAAI,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC;YACxB,MAAO,CAAC,UAAU,GAAS,MAAO,CAAC,OAAO,CAAC;YAEjD,MAAM,UAAU,GAAG,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC;YACtC,MAAM,SAAS,GAAG,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YAE1C,IAAI,UAAU,EAAE;;gBAER,MAAO,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC;gBAEzC,IAAI,CAAC,SAAS,EAAE;oBACd,MAAM,IAAI,GAAS,MAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;oBAC3C,MAAM,GAAG,IAAI,CAAC,OAAO,CAAO,MAAO,CAAC,SAAS,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;iBAClE;aACF;YAEK,MAAO,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC;;YAGrD,MAAO,CAAC,UAAU,CAAC,CAAC,uBAAuB,CAAC,EAAE;gBAChD,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;aAC1D,EAAE,CAAC,KAAK,KAAK,OAAO,CAAC,KAAK,CAAC,+BAA+B,EAAE,KAAK,CAAC,CAAC,CAAC;SACtE,CAAC;;QAGF,MAAM,oBAAoB,GAAG,CAAC,CAAO,MAAO,CAAC,UAAU,CAAC;QACxD,IAAI,oBAAoB,EAAE;YACxB,OAAO,cAAc,EAAE,CAAC;SACzB;QAED,MAAM,UAAU,GAAG,CAAC,CAAO,MAAO,CAAC,OAAO,CAAC;QAE3C,IAAI,UAAU,EAAE;YACd,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAC7B,IAAI,CAAC,WAAW,GAAS,MAAO,CAAC,OAAO,CAAC;SAC1C;QAED,MAAM,YAAY,GAAsB,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACzE,YAAY,CAAC,IAAI,GAAG,iBAAiB,CAAC;QACtC,YAAY,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,WAAW,YAAY,CAAC;QACnD,YAAY,CAAC,gBAAgB,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;QACtD,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;KACzC;IAED,qBAAqB;QACjB,MAAM,iBAAiB,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;;QAE3D,MAAM,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,0BAA0B,CAAC,CAAC;;QAEzE,MAAM,aAAa,GAAG,QAAQ,CAAC,cAAc,CAAC,8BAA8B,CAAC,CAAC;QAC9E,iBAAiB,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;QAC5C,iBAAiB,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;QAC7C,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;KAChD;;sHAlFQ,yBAAyB,wCAWsB,WAAW;0HAX1D,yBAAyB,cADZ,MAAM;2FACnB,yBAAyB;kBADrC,UAAU;mBAAC,EAAE,UAAU,EAAE,MAAM,EAAE;;;8BAYO,QAAQ;;8BAAI,MAAM;+BAAC,WAAW;;;;MCV1D,2BAA2B;IAItC,YACU,WAA6B,EAC7B,aAA+B,EAC/B,yBAAoD;QAFpD,gBAAW,GAAX,WAAW,CAAkB;QAC7B,kBAAa,GAAb,aAAa,CAAkB;QAC/B,8BAAyB,GAAzB,yBAAyB,CAA2B;QAN9D,oBAAe,GAAG,IAAI,CAAC,yBAAyB,CAAC,eAAe,CAAC,YAAY,EAAE,CAAC;QAChF,eAAU,GAAG,IAAI,OAAO,EAAQ,CAAC;KAM7B;IAEJ,QAAQ;QACN,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,MAAM;YACrE,IAAI,CAAC,MAAM,EAAE;gBACX,OAAO,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;aACnC;YACD,IAAI,CAAC,aAAa,CAAC,kBAAkB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SACzD,CAAC,CAAC;KACJ;IAED,WAAW;QACT,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;QACvB,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;KAC5B;;wHAtBU,2BAA2B;4GAA3B,2BAA2B;2FAA3B,2BAA2B;kBADvC,SAAS;mBAAC,EAAE,QAAQ,EAAE,uBAAuB,EAAE;;;MC2DnC,qBAAqB;IA6BhC,YAAoB,YAAuC,EACvC,IAAY;QADZ,iBAAY,GAAZ,YAAY,CAA2B;QACvC,SAAI,GAAJ,IAAI,CAAQ;QA3BvB,iBAAY,GAAG,KAAK,CAAC;QACpB,SAAI,GAA6C,IAAI,YAAY,EAAE,CAAC;QAQtE,cAAS,GAAe;SAC/B,CAAC;QACM,wBAAmB,GAAe;SACzC,CAAC;QACM,oBAAe,GAAoB;SAC1C,CAAC;KAcD;IAZD,IAAI,KAAK;QACP,OAAO,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;KAC9C;IAED,IAAI,YAAY;QACd,OAAO,IAAI,CAAC,KAAK,IAAI,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC;YACjD,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG;SACzB,CAAC,CAAC;KACJ;IAMD,QAAQ;QACN,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,IAAI,CACpC,MAAM,CAAC,QAAQ,IAAI,QAAQ,CAAC,EAC5B,IAAI,CAAC,CAAC,CAAC,CACR,CAAC,SAAS,CAAC;YACV,IAAI,CAAC,UAAU,EAAE,CAAC;SACnB,CAAC,CAAC;KACJ;IAED,WAAW,CAAC,OAAsB;QAChC,IAAI,IAAI,CAAC,MAAM,IAAI,OAAO,CAAC,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,EAAE;YAClE,MAAM,KAAqD,OAAO,CAAC,OAAO,CAAC,YAAY,EAAjF,EAAC,QAAQ,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,OAA4C,EAAvC,OAAO,cAAjD,qBAAkD,CAA+B,CAAC;YACxF,MAAM,EAAC,QAAQ,EAAE,YAAY,EAAE,KAAK,EAAE,SAAS,EAAC,GAAG,OAAO,CAAC,OAAO,CAAC,aAAa,CAAC;YAEjF,IAAI,YAAY,KAAK,UAAU,EAAE;gBAC/B,MAAM,CAAC,MAAM,CAAC,gBAAgB,CAC5B,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,EACtB,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,MAAM,CACvE,CAAC;aACH;YAED,IAAI,SAAS,KAAK,OAAO,EAAE;gBACzB,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;aACjC;YAED,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;SACpC;QAED,IAAI,IAAI,CAAC,MAAM,IAAI,OAAO,CAAC,GAAG,EAAE;YAC9B,MAAM,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC;YACvC,MAAM,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC;YAE1C,IAAI,OAAO,IAAI,CAAC,KAAK,IAAI,CAAC,OAAO,IAAI,KAAK,IAAI,KAAK,IAAI,OAAO,IAAI,KAAK,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,EAAE;gBAC7F,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;gBAErC,IAAI,IAAI,CAAC,gBAAgB,EAAE;oBACzB,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC;iBACjC;gBAED,IAAI,aAAa,CAAC;gBAElB,IAAI,KAAK,EAAE;oBACT,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,GAAG,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,CAAC,CAAC;iBAC1F;gBAED,IAAI,CAAC,gBAAgB,GAAG,aAAa,GAAG,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,IAAI,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;gBACpI,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;aAC7C;SACF;KACF;IAED,UAAU,CAAC,KAAa;QACtB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,IAAI,CAAC,MAAM,IAAI,KAAK,EAAE;YACxB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;SAC7B;aAAM,IAAI,IAAI,CAAC,MAAM,EAAE;YACtB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;SAC1B;KACF;IAED,gBAAgB,CAAC,EAAO;QACtB,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;KAC3B;IAED,iBAAiB,CAAC,EAAO;QACvB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;KACrB;IAED,QAAQ;QACN,OAAO,CAAC,IAAI,CAAC,WAAW,GAAG,IAAI,GAAG;YAChC,MAAM,EAAE;gBACN,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC;aACnC;SACF,CAAC;KACH;IAED,yBAAyB,CAAE,EAAc;QACvC,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;KAC/B;IAEO,UAAU;QAChB,MAAM,OAAO,GAAoC;YAC/C,KAAK,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;YAC9B,QAAQ,EAAE,MAAM;YAChB,eAAe,EAAE,IAAI;YACrB,oBAAoB,EAAE,KAAK;YAC3B,KAAK,EAAE,IAAI;SACZ,CAAC;QAEF,IAAI,IAAI,CAAC,YAAY,EAAE;YACrB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAChC,IAAI,CAAC,aAAa,CAAC,aAAa,EAChC,IAAI,CAAC,OAAO,mCAAO,OAAO,GAAK,IAAI,CAAC,OAAO,IAAI,OAAO,CACvD,CAAC;SACH;aAAM;YACL,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC;gBAC1B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAChC,IAAI,CAAC,aAAa,CAAC,aAAa,EAChC,IAAI,CAAC,OAAO,mCAAO,OAAO,GAAK,IAAI,CAAC,OAAO,IAAI,OAAO,CACvD,CAAC;aACH,CAAC,CAAA;SACH;QAED,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAC/B,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAC7B;IAED,uBAAuB;QACrB,IAAI,CAAC,MAAM,CAAC,uBAAuB,CAAC;YAClC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;SAC9C,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,CAAC,2BAA2B,CAAC;YACtC,MAAM,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAC,OAAO,EAAC,KAAK,OAAO,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YACnF,MAAM,0BAA0B,GAAG,IAAI,CAAC,WAAW,KAAK,kBAAkB,CAAC;YAE3E,IAAI,0BAA0B,EAAE;gBAC9B,IAAI,CAAC,WAAW,GAAG,kBAAkB,CAAC;gBACtC,IAAI,CAAC,mBAAmB,EAAE,CAAC;aAC5B;SACF,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC;YAC9B,IAAI,CAAC,SAAS,EAAE,CAAC;SAClB,CAAC,CAAC;KACJ;IAED,WAAW;QACT,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;SACvB;KACF;;kHApKU,qBAAqB;sGAArB,qBAAqB,iJAbrB;QACT;YACE,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,UAAU,CAAC,MAAM,qBAAqB,CAAC;YACpD,KAAK,EAAE,IAAI;SACZ;QACD;YACE,OAAO,EAAE,aAAa;YACtB,WAAW,EAAE,UAAU,CAAC,MAAM,qBAAqB,CAAC;YACpD,KAAK,EAAE,IAAI;SACZ;KACF,sKAvCS;;;;;;WAMD;2FAmCE,qBAAqB;kBA3CjC,SAAS;mBAAC;oBACT,QAAQ,EAAE,mBAAmB;oBAC7B,QAAQ,EAAE;;;;;;WAMD;oBACT,MAAM,EAAE;wBACN;;;;;;;;;;;;;;;;;QAiBI;qBACL;oBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;oBAC/C,SAAS,EAAE;wBACT;4BACE,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,EAAE,UAAU,CAAC,2BAA2B,CAAC;4BACpD,KAAK,EAAE,IAAI;yBACZ;wBACD;4BACE,OAAO,EAAE,aAAa;4BACtB,WAAW,EAAE,UAAU,CAAC,2BAA2B,CAAC;4BACpD,KAAK,EAAE,IAAI;yBACZ;qBACF;iBACF;kIAEU,OAAO;sBAAf,KAAK;gBACG,GAAG;sBAAX,KAAK;gBACG,YAAY;sBAApB,KAAK;gBACI,IAAI;sBAAb,MAAM;gBAC8B,aAAa;sBAAjD,SAAS;uBAAC,QAAQ,EAAE,EAAC,MAAM,EAAE,IAAI,EAAC;;;MCtBxB,yBAAyB;IAWlC,YAAoB,YAAuC;QAAvC,iBAAY,GAAZ,YAAY,CAA2B;QAJjD,SAAI,GAA8C,IAAI,YAAY,EAAE,CAAC;KAIf;IAEhE,QAAQ;QACJ,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC;QAClD,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,IAAI,CAClC,MAAM,CAAC,QAAQ,IAAI,QAAQ,CAAC,EAC5B,IAAI,CAAC,CAAC,CAAC,CACV,CAAC,SAAS,CAAC;YACR,IAAI,CAAC,UAAU,EAAE,CAAC;SACrB,CAAC,CAAC;KACN;IAED,WAAW,CAAC,OAAsB;QAC9B,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,MAAM,OAAO,CAAC,QAAQ,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,EAAE;YACrH,MAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC1D,MAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC1D,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;gBACjB,QAAQ;gBACR,QAAQ;aACX,CAAC,CAAC;SACN;QACD,IACI,IAAI,CAAC,MAAM;YACX,OAAO,CAAC,OAAO;YACf,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,EAC9B;YACE,IAAI,OAAO,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,KAAK,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,KAAK,EAAE;gBAC5E,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;aAC9D;YAED,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;SAC3D;KACJ;IAEO,UAAU;QACd,IAAI,IAAI,GAAwC;YAC5C,QAAQ,EAAE,IAAI;YACd,eAAe,EAAE,IAAI;YACrB,KAAK,EAAE,IAAI;SACd,CAAC;QACF,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;SAChD;QACD,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QAEnE,MAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC1D,MAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAE1D,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;YACjB,QAAQ;YACR,QAAQ;SACX,CAAC,CAAC;QACH,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;QACrB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAC/B;IAED,WAAW;QACP,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;SACzB;KACJ;;sHAvEQ,yBAAyB;0GAAzB,yBAAyB,qTA3BxB;;;;;OAKP;2FAsBM,yBAAyB;kBA7BrC,SAAS;mBAAC;oBACP,QAAQ,EAAE,wBAAwB;oBAClC,QAAQ,EAAE;;;;;OAKP;oBACH,MAAM,EAAE;wBACJ;;;;;;;;;;;;;;;;EAgBN;qBACG;oBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAClD;6GAKY,QAAQ;sBAAhB,KAAK;gBACG,QAAQ;sBAAhB,KAAK;gBACG,OAAO;sBAAf,KAAK;gBACI,IAAI;sBAAb,MAAM;gBAEkC,aAAa;sBAArD,SAAS;uBAAC,YAAY,EAAE,EAAC,MAAM,EAAE,IAAI,EAAC;;;MCtC9B,kBAAkB;;+GAAlB,kBAAkB;gHAAlB,kBAAkB,iBAVvB,2BAA2B;QAC3B,qBAAqB;QACrB,yBAAyB,aAGzB,2BAA2B;QAC3B,qBAAqB;QACrB,yBAAyB;gHAGpB,kBAAkB,YAZlB,EAAE;2FAYF,kBAAkB;kBAb9B,QAAQ;mBAAC;oBACN,OAAO,EAAE,EAAE;oBACX,YAAY,EAAE;wBACV,2BAA2B;wBAC3B,qBAAqB;wBACrB,yBAAyB;qBAC5B;oBACD,OAAO,EAAE;wBACL,2BAA2B;wBAC3B,qBAAqB;wBACrB,yBAAyB;qBAC5B;iBACJ;;;ACjBD;;;;ACAA;;;;;;"}